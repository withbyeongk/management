<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="menuMapper">
    
    <resultMap type="menu" id="menuResultSet">
        <result column="MENU_ID" property="menuId" />
        <result column="MENU_NM" property="menuNm" />
        <result column="MENU_URL" property="menuUrl" />
        <result column="MENU_LEVEL" property="menuLevel" />
        <result column="MENU_REF_ID" property="menuRefId" />
        <result column="MENU_ORDER" property="menuOrder" />
        <result column="MENU_MDF_DATE" property="menuMdfDate" />
        <result column="MENU_MDF_DATE" property="menuRegDate" />
    </resultMap>
    
    <select id="selectMaxId" resultType="_int">
        SELECT MAX(MENU_ID)
          FROM MENU
    </select>
    
    <select id="selectMenu" resultMap="menuResultSet">
        SELECT MENU_ID
             , MENU_NM
             , MENU_URL
             , MENU_LEVEL
             , MENU_REF_ID
             , MENU_ORDER
             , MENU_MDF_DATE
             , MENU_REG_DATE
          FROM MENU
         WHERE MENU_ID = #{menuId}
    </select>
    
    <select id="selectMenuList" resultMap="menuResultSet">
        SELECT MENU_ID
             , MENU_NM
             , MENU_URL
             , MENU_LEVEL
             , MENU_REF_ID
             , MENU_ORDER
             , MENU_MDF_DATE
             , MENU_REG_DATE
          FROM MENU
    </select>
    
    <insert id="insertMenu" parameterType="menu">
        INSERT INTO MENU (
                          MENU_NM
                        , MENU_URL
                        , MENU_LEVEL
                        , MENU_REF_ID
                        , MENU_ORDER
                        , MENU_REG_DATE
                        )
                VALUES (
                          #{menuNm}
                        , #{menuUrl}
                        , #{menuLevel}
                        , #{menuRefId}
                        , #{menuOrder}
                        , NOW()
                        )
    </insert>
    
    <delete id="deleteMenu">
        DELETE
          FROM MENU
         WHERE MENU_ID = #{menuId}
    </delete>
    
    <update id="updateMenu">
        UPDATE MENU
           SET MENU_NM       = #{menuNm}
             , MENU_URL      = #{menuUrl}
             , MENU_LEVEL    = #{menuLevel}
             , MENU_REF_ID   = #{menuRefId}
             , MENU_ORDER    = #{menuOrder}
             , MENU_MDF_DATE = NOW()
         WHERE MENU_ID = #{menuId}
    </update>
</mapper>