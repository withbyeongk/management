<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="siteMapper">
    
    
    <resultMap type="site" id="siteResultSet">
        <result column="SITE_ID" property="siteId" />
        <result column="SITE_NM" property="siteNm" />
    </resultMap>
    
    <select id="selectSiteList" resultMap="siteResultSet">
        SELECT SITE_ID
             , SITE_NM
          FROM SITE
    </select>
    
    <select id="selectSite" resultMap="siteResultSet" parameterType="String">
        SELECT SITE_ID
             , SITE_NM
          FROM SITE
         WHERE SITE_ID = #{siteId}
    </select>
    
    <insert id="insertSite" parameterType="site">
        INSERT INTO SITE (
                          SITE_ID
                        , SITE_NM
                        )
                VALUES (
                          #{siteId}
                        , #{siteNm}
                        )
    </insert>
    
    <delete id="deleteSite">
        DELETE
          FROM SITE
         WHERE SITE_ID = #{siteId}
    </delete>
    
    <update id="updateSite">
        UPDATE SITE
           SET SITE_NM = #{siteNm}
         WHERE SITE_ID = #{siteId}
    </update>
    
    <insert id="grantAccess">
        INSERT INTO SITE_ACCESS (
                                  ADMIN_ID
                                , SITE_ID
                                , ACCESS_YN
                                )
                        VALUES (
                                  #{adminId}
                                , #{siteId}
                                , 'Y'
                                )
    </insert>
    
    <update id="revokeAccess">
        UPDATE SITE_ACCESS
           SET ACCESS_YN = 'N'
         WHERE ADMIN_ID  = #{adminId}
           AND SITE_ID   = #{siteId}
    </update>
</mapper>